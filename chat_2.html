<!DOCTYPE html>
<html>
    <head>
        <meta name = viewport content = "width = device-width, initial-scale = 1">
        
        <script async src = "//www.googletagmanager.com/gtag/js?id=G-C34XCNZ9G4"></script>
        <script src = js/analytics.js></script>
        <script src = js/highlight.min.js></script>
        <script src = js/main.js></script>

        <link href = assets/fontawesome/css/fontawesome.css rel = stylesheet>
        <link href = assets/fontawesome/css/solid.css rel = stylesheet>
        <link rel = stylesheet href = main.css>

        <title>GreyHope · Tutorials · Chat App · Setup Code</title>
    </head>

    <body>
        <section class = top>
            <a href = index.html>GreyHope</a>
            <i onclick = toggleBars(this) class = "fa-solid fa-bars"></i>
            <i onclick = toggleTheme(this) class = theme></i>
            <a href = index.html>Projects</a>
            <a href = demos.html>Demos</a>
            <a href = tutorials.html class = this>Tutorials</a>
        </section>

        <section class = main>
            <h2>Chat App</h2>

            <div class = buttons>
                <a href = chat_1.html class = left><i class = "fa-solid fa-arrow-left"></i>Back</a>
                <a href = assets/zip/chat_2.zip class = left download><i class = "fa-solid fa-download"></i>Download</a>
                <a href = chat_3.html class = right>Next<i class = "fa-solid fa-arrow-right"></i></a>
            </div>

            <h3>2. Setup Code</h3>

            <p>
                On this page, we will start coding our <mark>Node.js</mark> chat app.
            </p>

            <p>
                At the end of the previous page, we installed <mark>Socket.IO</mark> and <mark>Express</mark> as part of our project.
                <mark>Socket.IO</mark> enables you to communicate between the browser and the server at top speed.
                <mark>Express</mark> is a framework that provides a set of features for <mark>Node.js</mark> applications.
                Both of these are very useful.
            </p>

            <p>
                First, inside your <mark>chat-app</mark> folder, create a new folder named <mark>public</mark>.
                This new folder is where we will keep all our files for the users.
                Inside the <mark>public</mark> folder create an empty file named <mark>index.html</mark>.
                This is the main <mark>HTML</mark> file that will be run at the start.
                So far, your file structure should look like this.
            </p>

            <script type = text>
                chat-app
                ├── node_modules
                ├── public
                │   └── index.html
                ├── package.json
                ├── package-lock.json
                └── server.js
            </script>

            <p>
                Let's focus on our server-side code.
                We want to import <mark>Socket.IO</mark> and <mark>Express</mark>.
                Type the following in your <mark>server.js</mark> file.
            </p>

            <script type = javascript>
                ‡const express = require("express")
                const app = express()
                const server = require("http").Server(app)
                const io = require("socket.io")(server)‡
            </script>

            <p>
                When a user connects to our application, the server needs to supply them with main <mark>HTML</mark> page.
                The code below, tells the server where this <mark>HTML</mark> file is.
            </p>

            <script type = javascript>
                const io = require("socket.io")(server)

                ‡app.use(express.static(__dirname + "/public"))
                app.get("/", (request, response) => response.render("index.html"))‡
            </script>

            <p>
                Finally, we need to set a port for the server.
                This is the place where the server will be waiting for users to connect.
                We will set the port to <mark>5000</mark> and make it print a message.
            </p>

            <script type = javascript>
                app.use(express.static(__dirname + "/public"))
                app.get("/", (request, response) => response.render("index.html"))

                ‡server.listen(5000, () => console.log("Server listening..."))‡
            </script>

            <p>
                Now we will focus on our client-side code.
                Write the following <mark>HTML</mark> code inside <mark>index.html</mark>.
            </p>

            <script type = html>
                ‡<!DOCTYPE html>
                <html>
                    <head>
                        <title>Chat App</title>
                    </head>

                    <body>
                        <h1>Welcome</h1>
                        Welcome to the new application.
                    </body>
                </html>‡
            </script>

            <p>
                Go to the <mark>Command Terminal</mark> and make sure the its current directory is your <mark>chap_app</mark> folder.
                If not, change the current directory.
            </p>

            <script type = sh>‡cd path/to/chat-app‡</script>

            <p>
                Now type the following into the terminal
            </p>

            <script type = sh>‡node server.js‡</script>

            <p>
                It should then print <mark>server listening</mark>.
                Now go to your web browser and visit <a href = http://localhost:5000 target = _blank>localhost:5000</a>, it should take you to the port we set up earlier.
                If everything works as planned, you should see this.
            </p>

            <script type = result>
                <h1>Welcome</h1>
                Welcome to the new application
            </script>

            <p>
                You have officially built your first <mark>Node.js</mark> application.
            </p>

            <p>
                Because we are currently connecting through <mark>localhost</mark>, no one else can access this website.
                We will use <mark>localhost</mark> for testing and later we will release our application online.
            </p>

            <div class = buttons>
                <a href = chat_1.html class = left><i class = "fa-solid fa-arrow-left"></i>Back</a>
                <a href = chat_3.html class = right>Next<i class = "fa-solid fa-arrow-right"></i></a>
            </div>
        </section>

        <footer>
		    <span>
		        © Copyright <span id = year></span> GreyHope ·
		        <a href = mailto:hello@greyhope.uk>hello@greyhope.uk</a>
		    </span>
		</footer>
    </body>
</html>